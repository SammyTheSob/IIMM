<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Incidents Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/IMapp.css ">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
    <script src="http://maps.google.com/maps/api/js" type="text/javascript"></script>
    <script src="/__/firebase/3.7.4/firebase-app.js"></script>
    <script src="/__/firebase/3.7.4/firebase-auth.js"></script>
    <script src="/__/firebase/init.js"></script>
    <script type="text/javascript" src="js/pgb.js"></script>
    <script type="text/javascript" src="js/fb.js"></script>
	<script type="text/javascript" src="js/operationfb.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script> $( "#map-canvas" ).load(readFb()); </script>
    <script>
        var config = {
            apiKey: "AIzaSyDRrNOiRQLy472LRntX6OLgnHjr1w446uc",
            authDomain: "incidentsmap-e8290.firebaseapp.com",
            databaseURL: "https://incidentsmap-e8290.firebaseio.com",
            projectId: "incidentsmap-e8290",
            storageBucket: "incidentsmap-e8290.appspot.com",
            messagingSenderId: "164737408971"
        };
        firebase.initializeApp(config);
        var database = firebase.database();
        // update the variable when the starCount is changed in the database
        var starCountRef = database.ref('posts/' + postId + '/starCount');
        starCountRef.on('value', function(snapshot) {
            updateStarCount(postElement, snapshot.val())
        });

        // update the UI
        function updateStarCount(el, val) {
            el.innerHtml(`${val} Stars!`);
        }
    </script>
</head>

<body class="container">
    <div data-role="page" id="main" data-title="StronaGlowna">
         <div class="back" align="center">
            <div data-role="header">
            <h1>Incidents Map</h1>
         </div>
            <a href="#login" class="buttonMain"><font color="white">Przejdź do aplikacji</button></font></a></p>
			<a id="call" class="buttonCall" href="tel:112"><font color="white">Wezwij pomoc</font></a> </p>
        </div>
    </div>

    <div data-role="page" id="login" data-title="Logowanie">
        <div class="back" align="center">
        <div data-role="header">
            <h1>Logowanie</h1>
        </div>
        <div class="container">
            <label for="uname"><font size=5 color="white"><b>E-mail</b></font></label>
            <input type="text" placeholder="Enter email" id="loginL" required>
            <br>
            <label for="psw"><font size=5 color="white"><b>Password</b></font></label>
            <input type="password" placeholder="Enter Password" id="pswL" required>
            <br>
            <div class="container" style="background-color:#f1f1f1">
                <button id="log" class="button1" onclick='funL();'>Zaloguj się</button>
                <br>
                <a href="#register" data-role="button">Zarejestruj się</button></a>
            </div>
            <br>
            <p><a href="#map"><font size =5 color="white">Przejdź dalej</font></a></p>
        </div>
    </div>
	</div>
	
    <div data-role="page" id="register" data-title="Rejestracja">
        <div class="back" align="center">
        <div data-role="header">
            <h1>Rejestracja</h1>
        </div>
        <div class="container">
            <label for="uname"><font size=5 color="white"><b>E-mail</b></font></label>
            <input type="text" placeholder="Enter email" id="loginR" required>
            <br>
            <label for="psw"><font size=5 color="white"><b>Password</b></font></label>
            <input type="password" placeholder="Enter Password" id="pswR" required>
            <br>
            <label for="psw"><font size=5 color="white"><b>Confirm password</b></font></label>
            <input type="password" placeholder="Enter Password" id="pswRC" required>
            <br>
            <div class="container" style="background-color:#f1f1f1">
                <button id="reg" class="button2" onclick='funR();'>Zarejestruj się</button>
            </div>
            <br>
            <p><a href="#map"><font size =5 color="white">Przejdź dalej</font></a></p>
        </div>
    </div>
    </div>
	
	<div data-role="page" id="map">
    <div class="back" align="center">
    	<div data-role="header">
            <h1>Mapa zdarzeń</h1>
        </div>
        <div id="map-canvas" style="width:100%;height:450px;"></div>

		<div class="container" style="background-color:#f1f1f1">
			<button id="del" class="button2" onclick='removeM();'>Usuń znacznik</button>
			<br>
			<label for="descr"><b>Opis</b></label>
            <input type="text" placeholder="Enter description" id="description" required>
			<br>
			<select id="rodzaj">
				<option>Wypadek</option>
				<option>Stłuczka</option>
				<option>Kradzież</option>
				<option>Napaść</option>
				<option>Zaginięcie</option>
				<option>Morderstwo</option>
			</select>
			<br>
			<button id="add" class="button2" onclick='addIncident();'>Dodaj znacznik do bazy</button>
			<br>
			<label>Wybierz typy zdarzeń do wyświetlenia:</label>
			<label><input type="checkbox" id="wy">Wypadek</label>
			<label><input type="checkbox" id="st">Stłuczka</label>
			<label><input type="checkbox" id="kr">Kradzież</label>
			<label><input type="checkbox" id="na">Napaść</label>
			<label><input type="checkbox" id="za">Zaginięcie</label>
			<label><input type="checkbox" id="mo">Morderstwo</label>
			<button class="button" onclick='showTypes();'>OK</button>
		</div>
        </div>
    </div>

</body>

</html>